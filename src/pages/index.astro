---
import Layout from "@/layouts/Layout.astro"
import About from "@/components/sections/About.astro"
import Education from "@/components/sections/Education.astro"
import Experience from "@/components/sections/Experience.astro"
import Hero from "@/components/sections/Hero.astro"
import Certificates from "@/components/sections/Certificates.astro"
import Projects from "@/components/sections/Projects.astro"
import Skills from "@/components/sections/Skills.astro"
import KeyboardManager from "@/components/KeyboardManager.astro"
import UserPreferences from "@/components/UserPreferences.astro"
import Strengths from "@/components/sections/Strengths.astro"
import { getCVData } from "@/utils/i18n.js"

// Obtener idioma y datos del CV
const lang = Astro.url.searchParams.get("lang") || "en";
const cvData = await getCVData(lang);
const { name, label } = cvData.basics;

// Títulos según idioma
const titles = {
  es: `Portafolio de ${name} - ${label}`,
  en: `${name}'s Portfolio - ${label}`
};
const pageTitle = titles[lang] || titles.en;
---

<Layout title={pageTitle}>
  <UserPreferences/>
  <main>
    <Hero cvData={cvData} />
    <About cvData={cvData} />
    <Experience cvData={cvData} />
    <Education cvData={cvData} />
    <Certificates cvData={cvData} />
    <Projects cvData={cvData} />
    <Skills cvData={cvData} />
    <Strengths cvData={cvData} />
  </main>

</Layout>

<style>
  main {
    padding: 4rem;
    margin: auto;
    width: 100%;
  }

  @media (width <= 700px) {
    main {
      padding: 2rem;
    }
  }
</style>
